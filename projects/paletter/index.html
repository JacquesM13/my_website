<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Web Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
        }

        main {
            flex: 1; /* pushes footer down */
        }
    </style>
</head>


<body>


<!-- Navbar -->
<div class="container-fluid px-5">
    <header class="p-3 mb-3 border-bottom">
        <div class="container d-flex flex-wrap align-items-center">
            <h3 class="me-auto"><a href="/" class="nav-link link-body-emphasis ">Jacques Massey</a></h3>
            <a href="/blog/" class="nav-link px-3 link-body-emphasis fs-5">Blog(ish)</a>
            <a href="/projects/" class="nav-link px-3 link-body-emphasis fs-5">Projects</a>
            <a href="/education/" class="nav-link px-3 link-body-emphasis fs-5">Education</a>
        </div>
    </header>
</div>


<!-- Content -->
<main class="container">
    <div class="px-4 pt-2 my-4 text-center">
        <h1 class="display-4 fw-bold text-body-emphasis">Colour Paletter</h1>
    </div>

    <div class="row g-5">
        <div class="col-md-8">
            <article class="blog-post"><h2 class="display-5 link-body-emphasis mb-1">Extracting Dominant Colours from
                Images and Displaying them in a Palette</h2>
                <p>As above.</p>
                <hr>
                <h2>Flask, NumPy, sklearn, SQL</h2>
                <p>I'd like to come back and make this application live, with an SQL databse and user login.</p>
            </article>
        </div>
        <div class="col-md-4">
            <div class="position-sticky" style="top: 2rem;">
                <div class="rounded">
                    <img src="/images/Paletter.png"
                         class="img-fluid  rounded-4 mb-5"
                         alt="Palette Image" width="400" height="400">
                </div>
            </div>
        </div>
        <!-- Code Tabs -->
        <ul class="nav nav-tabs" id="codeTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="main-tab" data-bs-toggle="tab" data-bs-target="#main"
                        type="button" role="tab">main.py
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="index-tab" data-bs-toggle="tab" data-bs-target="#index"
                        type="button" role="tab">index.html
                </button>
            </li>
        </ul>

        <div class="tab-content p-3 bg-body-tertiary rounded-bottom" id="codeTabsContent">

            <div class="tab-pane fade show active" id="main" role="tabpanel">
                <pre class="rounded-3 overflow-auto">
                    <code class="language-python">
from flask import Flask, flash, request, redirect, url_for, send_from_directory, render_template
from flask_bootstrap import Bootstrap4
from werkzeug.utils import secure_filename
import numpy as np
from PIL import Image
import matplotlib.pyplot as plt
import os
from sklearn.cluster import KMeans


# Numpy bit to get colour info from image
def extract_colours(filename):
    img = Image.open(f"./static/images/temp/" + filename)
    img_array = np.array(img)
    num_colours = 7
    pixels = img_array.reshape(-1, 3)
    kmeans = KMeans(n_clusters=num_colours, random_state=0).fit(pixels)
    centers = kmeans.cluster_centers_.astype(int)
    labels = kmeans.labels_
    counts = np.bincount(labels)
    sorted_idx = np.argsort(-counts)
    dominant_colours = centers[sorted_idx]

    for i, (col, count) in enumerate(zip(dominant_colours, counts[sorted_idx])):
        print(f"{i+1}. RGB: {col.tolist()}, pixels: {count}")

    palette = np.zeros((50, 50 * num_colours, 3), dtype=np.uint8)
    for i, col in enumerate(dominant_colours):
        palette[:, i*50:(i+1)*50] = col

    plt.figure(figsize=(8, 2))
    plt.imshow(palette)
    plt.axis("off")
    plt.savefig(f'./static/images/outputs/'+filename, dpi=250)
    # plt.show()

# Define a function for opening images or allow image links for now
UPLOAD_FOLDER = './static/images/temp'
OUTPUT_FOLDER = './static/images/outputs'
ALLOWED_EXTENSIONS = {'txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif'}

app = Flask(__name__)
bootstrap = Bootstrap4(app)
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER
app.config['OUTPUT_FOLDER'] = OUTPUT_FOLDER

def allowed_file(filename):
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

@app.route('/', methods=['GET', 'POST'])
def upload_file():
    if request.method == 'POST':
        # check if the post request has the file part
        if 'file' not in request.files:
            flash('No file part')
            return redirect(request.url)
        file = request.files['file']
        # If the user does not select a file, the browser submits an
        # empty file without a filename.
        if file.filename == '':
            flash('No selected file')
            return redirect(request.url)
        if file and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            extract_colours(filename)
            # return redirect(url_for('download_file', name=filename))
    return render_template('index.html', images = os.listdir(app.config['UPLOAD_FOLDER']))

if __name__ == '__main__':
    app.run(debug=True)
                    </code>
                </pre>
            </div>

            <div class="tab-pane fade" id="index" role="tabpanel">
                <pre class="rounded-3 overflow-auto">
                    <code class="language-html">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Colour Paletter&lt;/title&gt;
    {{ bootstrap.load_css() }}
    &lt;style&gt;
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 style=&quot;text-align: center&quot; class=&quot;my-4&quot;&gt;Colour Paletter&lt;/h1&gt;
&lt;form style=&quot;text-align: center&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; class=&quot;p-3&quot;&gt;
    &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;
&lt;/form&gt;
&lt;div class=&quot;row row-cols-xl-4 row-cols-lg-3 row-cols-md-2 row-cols-1 g-4 p-5&quot; style=&quot;vertical-align: center&quot;&gt;
    {% for image in images %}
    &lt;div class=&quot;col d-flex flex-column align-content-center&quot;&gt;
        &lt;img src=&quot;static/images/temp/{{ image }}&quot; class=&quot;image mb-3&quot; style=&quot;width: 100%&quot; alt=&quot;image&quot;/&gt;
        &lt;img src=&quot;static/images/outputs/{{ image }}&quot; class=&quot;image&quot; style=&quot;width: 100%&quot; alt=&quot;image&quot;/&gt;
    &lt;/div&gt;
    {% endfor %}
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
                    </code>
                </pre>
            </div>
        </div>

    </div>
</main>


<!-- Footer -->
<div class="container-fluid px-5">
    <footer class="d-flex flex-wrap justify-content-between align-items-center py-2 my-2 mt-auto">
        <div class="col-md-4 d-flex align-items-center">
            <span class="mb-3 mb-md-0 text-body-secondary">Â© Jacques Massey 2025</span>
        </div>
        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="ms-3">
                <a class="text-body-secondary" href="https://www.goodreads.com/user/show/99919158-jacques"
                   aria-label="Goodreads">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor"
                         class="bi bi-instagram" viewBox="0 0 16 16">
                        <path d="M3.4250999999999996 12.512599999999999h0.08575833333333333c0.3889833333333333 0 0.7810291666666667 0 1.1700125 0.0030624999999999997 0.04900833333333333 0 0.09494999999999999 -0.012249999999999999 0.1102625 0.06432083333333333 0.2174625 1.0689374999999999 0.9188583333333333 1.6723208333333333 1.9265374999999998 1.9571666666666667 0.8239125 0.23277499999999998 1.6570083333333332 0.23890416666666664 2.490104166666667 0.05512916666666666 1.0352458333333332 -0.22665000000000002 1.7151999999999998 -0.8667875 2.082745833333333 -1.8499624999999997 0.24502916666666666 -0.6585166666666666 0.327725 -1.3415333333333335 0.3369125 -2.0368041666666663 0.0030624999999999997 -0.1776458333333333 0.009191666666666666 -1.4395416666666665 -0.006124999999999999 -1.6171875l-0.027566666666666663 -0.0091875c-0.024499999999999997 0.045941666666666665 -0.052066666666666664 0.08882083333333332 -0.07657083333333332 0.1347625 -0.6768916666666667 1.3200958333333332 -1.8775291666666665 2.0643666666666665 -3.2282499999999996 2.1164375 -3.154745833333333 0.1225125 -5.188483333333333 -1.7458291666666668 -5.268116666666666 -5.396758333333333 -0.015316666666666666 -0.7258958333333334 0.05512916666666666 -1.4364791666666665 0.25421666666666665 -2.1348125C3.9059708333333334 1.6210749999999998 5.5599125 0.1784708333333333 7.988758333333333 0.16009166666666666c1.8775333333333333 -0.012249999999999999 3.1087999999999996 1.1853291666666665 3.5590416666666664 2.1531916666666664 0.0153125 0.03369166666666666 0.03981666666666667 0.07044583333333333 0.07350833333333333 0.05819166666666667V0.48475416666666665h1.3568458333333333c0 8.585191666666667 0.0030624999999999997 10.174816666666667 0.0030624999999999997 10.174816666666667 -0.0030624999999999997 2.404345833333333 -0.8177833333333333 4.401329166666667 -3.1547416666666668 4.967958333333333 -2.1286875 0.5176208333333333 -4.8699458333333325 0.14701666666666666 -6.0032041666666665 -1.751958333333333 -0.24502916666666666 -0.4134833333333333 -0.3614166666666666 -0.8667875 -0.39817083333333336 -1.3629708333333332ZM7.906062499999999 1.2780375c-1.6079999999999999 -0.015316666666666666 -3.3232 1.2465833333333332 -3.5222874999999996 4.098104166666666 -0.12557916666666666 1.8070833333333332 0.4533041666666667 3.7428125 2.1899416666666665 4.551408333333333 0.8453499999999999 0.3951083333333333 2.2757041666666664 0.459425 3.3170791666666664 -0.2664708333333333 1.4579166666666667 -1.0168666666666666 1.920408333333333 -2.970970833333333 1.6784458333333332 -4.716799999999999 -0.2971 -2.1776916666666666 -1.464045833333333 -3.6754333333333333 -3.6631791666666667 -3.6662416666666666Z"
                              fill="#000000" stroke-width="0.0417"></path>
                    </svg>
                </a>
            </li>
            <li class="ms-3">
                <a class="text-body-secondary" href="https://github.com/JacquesM13"
                   aria-label="GitHub">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor"
                         class="bi bi-instagram" viewBox="0 0 16 16">
                        <path d="M7.999933333333333 0.35346666666666665c-1.8616000000000001 0.00006666666666666667 -3.662466666666666 0.6626 -5.080266666666667 1.8689333333333331C1.5017999999999998 3.4287333333333327 0.5594666666666666 5.100266666666666 0.26126666666666665 6.937866666666666c-0.29819999999999997 1.8375333333333332 0.0672 3.7212666666666667 1.0308 5.3141333333333325 0.9635333333333334 1.5927333333333333 2.462466666666667 2.790733333333333 4.228533333333333 3.3795333333333333 0.39199999999999996 0.0686 0.5389999999999999 -0.1666 0.5389999999999999 -0.37239999999999995 0 -0.18619999999999998 -0.0098 -0.8036 -0.0098 -1.4602 -1.9697999999999998 0.36260000000000003 -2.4794 -0.4801333333333333 -2.6361999999999997 -0.9211333333333332 -0.174 -0.4288666666666666 -0.4498 -0.8089333333333333 -0.8036 -1.1074 -0.2744 -0.147 -0.6664 -0.5095999999999999 -0.0098 -0.5194 0.2507333333333333 0.027200000000000002 0.4911333333333333 0.11446666666666666 0.7010000000000001 0.2543333333333333 0.2098 0.13986666666666664 0.3828666666666667 0.3283333333333333 0.5044 0.5492666666666666 0.10719999999999999 0.1926 0.25139999999999996 0.36219999999999997 0.4242666666666666 0.499 0.17286666666666664 0.13679999999999998 0.37106666666666666 0.2382 0.5831999999999999 0.29819999999999997 0.2121333333333333 0.060066666666666664 0.434 0.07773333333333332 0.6529333333333334 0.05193333333333333s0.43066666666666664 -0.09453333333333333 0.6229333333333333 -0.2023333333333333c0.03393333333333333 -0.39859999999999995 0.2116 -0.7712666666666667 0.4998666666666667 -1.0486 -1.7444 -0.19599999999999998 -3.5671999999999997 -0.8722 -3.5671999999999997 -3.8709999999999996 -0.011 -0.7791333333333333 0.27646666666666664 -1.533 0.8036 -2.106933333333333 -0.23966666666666664 -0.6772 -0.21166666666666667 -1.4203999999999999 0.0784 -2.0776 0 0 0.6565333333333333 -0.20579999999999998 2.1559999999999997 0.8036 1.2828 -0.3528 2.6370666666666667 -0.3528 3.9199333333333333 0 1.4993999999999998 -1.0191999999999999 2.1559999999999997 -0.8036 2.1559999999999997 -0.8036 0.29006666666666664 0.6572 0.3181333333333333 1.4003999999999999 0.0784 2.0776 0.5286 0.5729333333333333 0.8164666666666666 1.3275333333333332 0.8036 2.106933333333333 0 3.0086 -1.8325999999999998 3.675 -3.577 3.8709999999999996 0.18706666666666666 0.1896 0.3311333333333333 0.41733333333333333 0.42246666666666666 0.6675333333333333 0.09133333333333334 0.2503333333333333 0.1277333333333333 0.5173333333333333 0.10673333333333332 0.7828666666666666 0 1.0486666666666666 -0.0098 1.8913333333333333 -0.0098 2.1559333333333335 0 0.20579999999999998 0.147 0.4508 0.5389999999999999 0.37239999999999995 1.7629333333333332 -0.5935333333333332 3.2575333333333334 -1.7943333333333333 4.217 -3.3879333333333332 0.9595333333333333 -1.5936666666666666 1.3214 -3.476466666666666 1.0211333333333332 -5.312266666666666 -0.3002666666666667 -1.8357333333333332 -1.2431333333333332 -3.5050666666666666 -2.6604 -4.709933333333333C11.659466666666667 1.0164666666666666 9.860133333333334 0.3544666666666666 7.999933333333333 0.35346666666666665Z"
                              fill="#000000" stroke-width="0.6667"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-python.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>
</html>
